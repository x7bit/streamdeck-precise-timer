<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover">
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-status-bar-style content=black>
    <title>com.x7bit.precisetimer Property Inspector</title>
    <link rel="stylesheet" href="css/sdpi.css">
  </head>
  <body>
    <div class="sdpi-wrapper">

      <!-- DROP HTML-STUFF BELOW -->

      <!--
        Here we just copied a couple of elements from the PISamples example, which contains
        a huge collection pre-made HTML-elements for you to use.
        Important here is (if you plan to communicate from the Property Inspector to the plugin without
        further programming), that you add an 'id' to an element's control.
        This will get the 'key', which is sent to the plugin (or settings), along with the value of
        the control.
      -->

      <div class="sdpi-item">
        <div class="sdpi-item-label">Hours</div>
        <input class="sdpi-item-value" id="hours" required pattern="([0-9]|1[0-5])">
      </div>

      <div class="sdpi-item">
        <div class="sdpi-item-label">Minutes</div>
        <input class="sdpi-item-value" id="minutes" required pattern="[1-5]?[0-9]">
      </div>

      <div class="sdpi-item">
        <div class="sdpi-item-label">Seconds</div>
        <input class="sdpi-item-value" id="seconds" required pattern="[1-5]?[0-9]">
      </div>

      <div class="sdpi-item">
        <div class="sdpi-item-label">Links</div>
        <button class="sdpi-item-value" id="readme-button">Readme</button>
        <button class="sdpi-item-value" id="changelog-button">Changelog</button>
   </div>

      <!-- END OF SDPI-WRAPPER -->

    </div>

    <div class="sdpi-info-label hidden" style="top: -1000;" value=""></div>

    <script src="../js/common.js"></script>
    <script src="js/common_pi.js"></script>
    <script src="js/index_pi.js"></script>
    <script>
      const onlyNumbers = (value, min, max) => {
        value = parseInt(value.replace(/[^0-9]/g, ''));
        if (isNaN(value)) {
          return 0;
        }
        if (value > max) {
          return max;
        }
        if (value < min) {
          return min;
        }
        return value;
      };

      const hoursInput = document.getElementById('hours');
      hoursInput.oninput = () => hoursInput.value = hoursInput.value.replace(/[^0-9]/g, '');
      hoursInput.onchange = () => hoursInput.value = onlyNumbers(hoursInput.value, 0, 15);

      const minutesInput = document.getElementById('minutes');
      minutesInput.oninput = () => minutesInput.value = minutesInput.value.replace(/[^0-9]/g, '');
      minutesInput.onchange = () => minutesInput.value = onlyNumbers(minutesInput.value, 0, 59);

      const secondsInput = document.getElementById('seconds');
      secondsInput.oninput = () => secondsInput.value = secondsInput.value.replace(/[^0-9]/g, '');
      secondsInput.onchange = () => secondsInput.value = onlyNumbers(secondsInput.value, 0, 59);

      const readmeButton = document.getElementById('readme-button');
      readmeButton.onclick = () => $SD.api.openUrl($SD.uuid, 'https://github.com/x7bit/streamdeck-precise-timer/blob/main/README.md');

      const changelogButton = document.getElementById('changelog-button');
      changelogButton.onclick = () => $SD.api.openUrl($SD.uuid, 'https://github.com/x7bit/streamdeck-precise-timer/blob/main/changelog.md');
    </script>
  </body>
</html>
